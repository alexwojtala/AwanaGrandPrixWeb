(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{42:function(e,t,a){},59:function(e,t,a){},64:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(12),r=a.n(c),u=(a(42),a(14)),o=a(8),i=a(2),m=a(3),s=a.n(m),d=(a(59),function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),u=Object(i.a)(r,2),m=u[0],d=u[1],E=Object(n.useState)(!1),b=Object(i.a)(E,2),h=b[0],p=b[1],f=Object(n.useState)(!1),g=Object(i.a)(f,2),O=g[0],v=g[1],C=Object(n.useState)(!1),R=Object(i.a)(C,2),S=R[0],_=R[1];return l.a.createElement(l.a.Fragment,null,h&&l.a.createElement(o.a,{to:"/cars",push:!0}),!h&&l.a.createElement("main",null,l.a.createElement("div",{className:"signInContainer"},l.a.createElement("h1",null,"Sign in to Awana Grand Prix"),l.a.createElement("h2",{className:"roleLoginInputLabel"},"Role"),l.a.createElement("div",{className:"roleRadioButtons"},l.a.createElement("input",{id:"role-guest",type:"radio",name:"role",value:"guest",onChange:function(e){c(e.target.value)}})," ",l.a.createElement("label",{htmlFor:"role-guest"},"Guest"),l.a.createElement("input",{id:"role-volunteer",type:"radio",name:"role",value:"volunteer",onChange:function(e){c(e.target.value)}})," ",l.a.createElement("label",{htmlFor:"role-volunteer"},"Volunteer"),l.a.createElement("input",{id:"role-admin",type:"radio",name:"role",value:"admin",onChange:function(e){c(e.target.value)}})," ",l.a.createElement("label",{htmlFor:"role-admin"},"Admin"),l.a.createElement("br",null)),l.a.createElement("label",{htmlFor:"password",className:"roleLoginInputLabel"},"Password")," ",l.a.createElement("br",null),l.a.createElement("input",{id:"password",className:"rolePasswordInput",type:"password",onChange:function(e){d(e.target.value)}}),l.a.createElement("br",null),O&&l.a.createElement("div",{className:"loadingContainer"},l.a.createElement("div",null,"Authenticating"),l.a.createElement("div",{className:"loader"})),!O&&S&&l.a.createElement("div",{className:"loginFailed"},"Login failed. Invalid credentials."),l.a.createElement("button",{onClick:function(){s.a.post("/sign-in",{},{auth:{username:a,password:m}}).then((function(e){localStorage.setItem("authToken",e.data.token),s.a.defaults.headers.common={Authorization:"Bearer ".concat(localStorage.getItem("authToken"))},localStorage.setItem("role",e.data.user.role),p(!0),v(!1),_(!1)})).catch((function(e){v(!1),_(!0),console.log(e)})),v(!0)}},"Login"))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(64);var E,b=a(10),h=a(11),p=function(e){var t=e.clubber,a=e.groupId,n=e.onContinue;return l.a.createElement("div",{className:"container"},l.a.createElement("h2",null,"you are entered ",l.a.createElement(b.a,{icon:h.a})),l.a.createElement("div",null,t," is ",l.a.createElement("strong",null,"#",a)),l.a.createElement("button",{className:"enrollClubber",onClick:function(){return n()}},"Enroll next clubber"))},f=(a(67),a(68),function(e){var t=e.path,a=e.text,n=e.currentPathname;return l.a.createElement(u.b,{className:"navLink"+(n===t?" selectedLink":""),to:t},a)}),g=Object(o.f)((function(e){return l.a.createElement("nav",null,l.a.createElement("div",{className:"navContainer"},l.a.createElement("div",{className:"logo"},l.a.createElement(b.a,{icon:h.b}),"\xa0\xa0\xa0AWANA Grand Prix"),l.a.createElement("a",{className:"loginLink",href:"/"},localStorage.getItem("role")?localStorage.getItem("role"):"login"),l.a.createElement(f,{path:"/check-in",text:"Check In",currentPathname:e.location.pathname}),l.a.createElement(f,{path:"/cars",text:"Cars",currentPathname:e.location.pathname}),l.a.createElement(f,{path:"/races",text:"Races",currentPathname:e.location.pathname}),l.a.createElement(f,{path:"/lineup",text:"Lineup",currentPathname:e.location.pathname}),l.a.createElement(f,{path:"/leaderboard",text:"Leaderboard",currentPathname:e.location.pathname})))})),O=function(e){var t=e.children;return l.a.createElement(l.a.Fragment,null,l.a.createElement(g,null),l.a.createElement("main",null,t))};s.a.defaults.headers.common={Authorization:"Bearer ".concat(localStorage.getItem("authToken"))},function(e){e[e.FORM=0]="FORM",e[e.SUBMITTED=1]="SUBMITTED"}(E||(E={}));var v,C,R=function(){var e=Object(n.useState)(),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(),u=Object(i.a)(r,2),o=u[0],m=u[1],d=Object(n.useState)(),b=Object(i.a)(d,2),h=b[0],f=b[1],g=Object(n.useState)(),v=Object(i.a)(g,2),C=v[0],R=v[1],S=Object(n.useState)(E.FORM),_=Object(i.a)(S,2),N=_[0],j=_[1];switch(N){case E.SUBMITTED:return l.a.createElement(O,null,l.a.createElement(p,{clubber:o,groupId:a,onContinue:function(){j(E.FORM)}}));default:return l.a.createElement(O,null,l.a.createElement("form",{className:"container",onSubmit:function(e){e.preventDefault(),s.a.post("/cars",{clubber:o,meets_requirements:h,club:C}).then((function(e){c(e.data.group_id),j(E.SUBMITTED)})).catch((function(e){console.log(e)}))}},l.a.createElement("h1",null,"Welcome to the Awana Grand Prix"),l.a.createElement("h2",null,"Racer Name"),l.a.createElement("input",{type:"text","aria-label":"Racer's Name",onChange:function(e){return m(e.target.value)},required:!0}),l.a.createElement("h2",null,"group"),l.a.createElement("div",null,l.a.createElement("label",null,l.a.createElement("input",{type:"radio",name:"awana-group",value:"Sparks",onChange:function(e){return R(e.target.value)},required:!0}),"Sparks"),l.a.createElement("label",null,l.a.createElement("input",{type:"radio",name:"awana-group",value:"Ultimate Adventure",onChange:function(e){return R(e.target.value)}}),"Ultimate Adventure"),l.a.createElement("label",null,l.a.createElement("input",{type:"radio",name:"awana-group",value:"Ultimate Challenge",onChange:function(e){return R(e.target.value)}}),"Ultimate Challenge"),l.a.createElement("label",null,l.a.createElement("input",{type:"radio",name:"awana-group",value:"Other",onChange:function(e){return R(e.target.value)}}),"Other")),l.a.createElement("h2",null,"division"),l.a.createElement("div",null,"Other"!==C&&l.a.createElement("label",null,l.a.createElement("input",{type:"radio",name:"division",value:"Normal",onChange:function(){return f(!0)}}),"Normal"),"Other"===C&&l.a.createElement("label",{className:"disabled"},l.a.createElement("input",{type:"radio",name:"division",value:"Normal",onChange:function(){return f(!0)},disabled:!0}),"Normal"),l.a.createElement("label",null,l.a.createElement("input",{type:"radio",name:"division",value:"Outlaw",onChange:function(){return f(!1)},required:!0}),"Outlaw")),l.a.createElement("button",{className:"enter"},"Enter")))}};a(69);!function(e){e[e.NONE=0]="NONE",e[e.GROUPID=1]="GROUPID",e[e.CLUBBER=2]="CLUBBER",e[e.CLUB=3]="CLUB",e[e.DIVISION=4]="DIVISION"}(v||(v={})),function(e){e[e.EDIT_CAR=0]="EDIT_CAR",e[e.SHOW_CARS=1]="SHOW_CARS"}(C||(C={}));var S,_=function(){var e=Object(n.useState)(),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(v.NONE),u=Object(i.a)(r,2),o=u[0],m=u[1],d=Object(n.useState)(!0),E=Object(i.a)(d,2),p=E[0],f=E[1],g=Object(n.useState)(C.SHOW_CARS),R=Object(i.a)(g,2),S=R[0],_=R[1],N=Object(n.useState)(),j=Object(i.a)(N,2),I=j[0],T=j[1],A=Object(n.useState)(),k=Object(i.a)(A,2),y=k[0],w=k[1],D=Object(n.useState)(),L=Object(i.a)(D,2),B=L[0],U=L[1],x=Object(n.useState)(),P=Object(i.a)(x,2),G=P[0],F=P[1];Object(n.useEffect)((function(){s.a.get("/race-groups/current",{}).then((function(e){e.data.id?f(!0):f(!1)})).catch((function(e){console.log(e)})),W()}),[]);var W=function(){s.a.get("/cars",{}).then((function(e){c(e.data.map((function(e){var t=3-e.group_id.length,a=Array(t).fill("0").join("");return{id:e.id,sort_group_id:e.group_id.substr(0,1)+a+e.group_id.substr(1,e.group_id.length),group_id:e.group_id,clubber:e.clubber,club:e.club,division:e.division,meets_requirements:e.meets_requirements}})))})).catch((function(e){console.log(e)}))},M=function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null,e.group_id),l.a.createElement("td",null,e.clubber),l.a.createElement("td",null,e.club),l.a.createElement("td",null,e.division),l.a.createElement("td",null,!p&&l.a.createElement("button",{onClick:function(){T(e.id),w(e.club),U(e.clubber),F(e.group_id),_(C.EDIT_CAR)}},"Edit"),p&&l.a.createElement("button",{disabled:!0},"Edit")),l.a.createElement("td",null,!p&&l.a.createElement("button",{onClick:function(){var t;t=e.id,s.a.delete("/cars/".concat(t)).then((function(){W()})).catch((function(e){console.log(e)}))}},"Delete"),p&&l.a.createElement("button",{disabled:!0},"Delete")))};switch(S){case C.EDIT_CAR:return l.a.createElement("div",{style:{width:"600px",margin:"32px auto"}},l.a.createElement("label",{htmlFor:"editGroupId",className:"editCarInputLabel"},"GROUP ID")," ",l.a.createElement("br",null),l.a.createElement("input",{id:"editGroupId",className:"editCarInput",type:"text",onChange:function(e){F(e.target.value)},value:G}),l.a.createElement("br",null),l.a.createElement("label",{htmlFor:"editClubber",className:"editCarInputLabel"},"CLUBBER")," ",l.a.createElement("br",null),l.a.createElement("input",{id:"editClubber",className:"editCarInput",type:"text",onChange:function(e){U(e.target.value)},value:B}),l.a.createElement("br",null),l.a.createElement("label",{htmlFor:"editClubber",className:"editCarInputLabel"},"CLUB")," ",l.a.createElement("br",null),l.a.createElement("input",{id:"editClub",className:"editCarInput",type:"text",onChange:function(e){w(e.target.value)},value:y}),l.a.createElement("br",null),l.a.createElement("button",{className:"editCarButton",onClick:function(){s.a.put("/cars/".concat(I),{club:y,clubber:B,group_id:G}).then((function(){W(),_(C.SHOW_CARS)})).catch((function(e){console.log(e)}))}},"Update"),l.a.createElement("button",{className:"editCarCancel",onClick:function(){_(C.SHOW_CARS)}},"Cancel"));default:return l.a.createElement(O,null,l.a.createElement("h1",null,"Registered Racers"),l.a.createElement("table",{className:"carsTable"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{onClick:function(){m(v.GROUPID)}},"ID ",l.a.createElement(b.a,{icon:h.c})),l.a.createElement("th",{onClick:function(){m(v.CLUBBER)}},"CLUBBER ",l.a.createElement(b.a,{icon:h.c})),l.a.createElement("th",{onClick:function(){m(v.CLUB)}},"CLUB ",l.a.createElement(b.a,{icon:h.c})),l.a.createElement("th",{onClick:function(){m(v.DIVISION)}},"DIVISION ",l.a.createElement(b.a,{icon:h.c})),l.a.createElement("th",null,"EDIT"),l.a.createElement("th",null,"DELETE"))),l.a.createElement("tbody",null,o===v.NONE&&a&&a.map(M),o===v.GROUPID&&a&&a.sort((function(e,t){return e.sort_group_id>t.sort_group_id?1:-1})).map(M),o===v.CLUBBER&&a&&a.sort((function(e,t){return e.clubber>t.clubber?1:-1})).map(M),o===v.CLUB&&a&&a.sort((function(e,t){return e.club>t.club?1:-1})).map(M),o===v.DIVISION&&a&&a.sort((function(e,t){return e.division>t.division?1:-1})).map(M))))}};a(70);s.a.defaults.headers.common={Authorization:"Bearer ".concat(localStorage.getItem("authToken"))},function(e){e[e.RACE_STARTED=0]="RACE_STARTED",e[e.RACE_NOT_STARTED=1]="RACE_NOT_STARTED",e[e.CHOOSE_GROUP_TO_START=2]="CHOOSE_GROUP_TO_START"}(S||(S={}));var N=function(){var e=Object(n.useState)(),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(S.RACE_NOT_STARTED),u=Object(i.a)(r,2),o=u[0],m=u[1];switch(Object(n.useEffect)((function(){s.a.get("/race-groups/current",{}).then((function(e){e.data.name&&!e.data.is_finished&&(m(S.RACE_STARTED),s.a.get("/race-groups/".concat(e.data.id,"/races")).then((function(e){c(e.data)})))})).catch((function(e){console.log(e)}))}),[]),o){case S.RACE_STARTED:return l.a.createElement(O,null,l.a.createElement("h1",null,"Race Order"),l.a.createElement("table",{className:"racesTable"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Race #"),l.a.createElement("th",null,"LANE 1"),l.a.createElement("th",null,"LANE 2"),l.a.createElement("th",null,"LANE 3"),l.a.createElement("th",null,"LANE 4"))),l.a.createElement("tbody",null,void 0!==a&&a.map((function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null,e.id),l.a.createElement("td",null,e.lanes_by_group_id[0]),l.a.createElement("td",null,e.lanes_by_group_id[1]),l.a.createElement("td",null,e.lanes_by_group_id[2]),l.a.createElement("td",null,e.lanes_by_group_id[3]))})))));case S.CHOOSE_GROUP_TO_START:return l.a.createElement(O,null,l.a.createElement("div",{className:"choose-group-container"},l.a.createElement("h1",null,"Which type?"),l.a.createElement("button",{onClick:function(){s.a.post("/race-groups/",{name:"Regular"}).then((function(){m(S.RACE_STARTED)}))}},"Regular"),l.a.createElement("button",{onClick:function(){s.a.post("/race-groups/",{name:"Outlaw"}).then((function(){m(S.RACE_STARTED)}))}},"Outlaw")));default:return l.a.createElement(O,null,l.a.createElement("div",{className:"start-race-container"},l.a.createElement("h1",null,"No Races have been started."),l.a.createElement("button",{onClick:function(){m(S.CHOOSE_GROUP_TO_START)}},"Start Race")))}},j=(a(71),function(e){var t=e.className,a=e.headers,n=e.content;return l.a.createElement("table",{className:t},l.a.createElement("thead",null,l.a.createElement("tr",null,a.map((function(e,t){return l.a.createElement("th",{key:"header-".concat(t)},e)})))),l.a.createElement("tbody",null,n.map((function(e,t){return l.a.createElement("tr",{key:"contentElementRow-".concat(t)},e.map((function(e,t){return l.a.createElement("td",{key:"contentElement-".concat(t)},e)})))}))))}),I=a(35),T=a(36),A=function(){function e(){Object(I.a)(this,e)}return Object(T.a)(e,null,[{key:"getCurrentRace",value:function(e){return s.a.get("/race-groups/".concat(e,"/races/current"),{}).then((function(e){return e.data})).catch((function(e){console.log(e)}))}},{key:"getNextRace",value:function(e){return s.a.get("/race-groups/".concat(e,"/races/next"),{}).then((function(e){return e.data})).catch((function(e){console.log(e)}))}},{key:"postRaceResults",value:function(e,t){return s.a.post("/race-groups/".concat(e,"/races/").concat(t.race_id,"/result"),{result:t}).then((function(e){return e.data})).catch((function(e){console.log(e)}))}},{key:"getCurrentRaceGroup",value:function(){return s.a.get("/race-groups/current",{}).then((function(e){return e.data})).catch((function(e){console.log(e)}))}}]),e}(),k=a(21),y=a(37),w=function(e){var t=e.label,a=e.onChangeCallback,n={control:function(e){return Object(k.a)(Object(k.a)({},e),{},{width:200})}};return l.a.createElement(y.a,{"aria-label":t,options:[{value:1,label:"1st Place"},{value:2,label:"2nd Place"},{value:3,label:"3rd Place"},{value:4,label:"4th Place"}],isSearchable:!0,autosize:!0,onChange:function(e){return a(e.value)},styles:n})};s.a.defaults.headers.common={Authorization:"Bearer ".concat(localStorage.getItem("authToken"))};var D=function(){var e=Object(n.useState)(),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(),u=Object(i.a)(r,2),o=u[0],m=u[1],s=Object(n.useState)(-1),d=Object(i.a)(s,2),E=d[0],b=d[1],h=Object(n.useState)([0,0,0,0]),p=Object(i.a)(h,2),f=p[0],g=p[1],v=Object(n.useState)(0),C=Object(i.a)(v,2),R=C[0],S=C[1],_=Object(n.useState)(!0),N=Object(i.a)(_,2),I=N[0],T=N[1],k=Object(n.useCallback)((function(){A.getCurrentRace(E).then(c)}),[E]),y=Object(n.useCallback)((function(){A.getNextRace(E).then(m)}),[E]);Object(n.useEffect)((function(){-1!==E&&(k(),y())}),[E,k,y]),Object(n.useEffect)((function(){A.getCurrentRaceGroup().then((function(e){e.id&&(S(e.race_count),b(e.id))}))}),[]);return l.a.createElement(O,null,l.a.createElement("div",{className:"nextRaceContainer"},l.a.createElement("h1",null,"Race Lineup"),l.a.createElement("h2",null,"Up Next"),void 0!==o&&l.a.createElement(j,{className:"nextRace",headers:["Group Id","Name"],content:o.lanes_by_group_id.map((function(e,t){return[e,o.lanes_by_clubber[t]]}))})),l.a.createElement("h2",null,"Current Race (",void 0!==a&&void 0!==R&&"".concat(a.id," / ").concat(R),")"),void 0!==a&&l.a.createElement(j,{className:"currentRace",headers:["Group Id","Name","Place"],content:a.lanes_by_group_id.map((function(e,t){return[e,a.lanes_by_clubber[t],l.a.createElement(w,{key:"lane".concat(t),label:"lane".concat(t,"Position"),onChangeCallback:function(e){f[t]=Number(e)}})]}))}),E&&l.a.createElement("button",{className:"submit-race-results-button",onClick:function(){if(a&&f.includes(1)&&f.includes(2)&&f.includes(3)&&f.includes(4)){var e={race_id:a.id,places:f};A.postRaceResults(E,e).then((function(){g([0,0,0,0]),k(),y(),T(!0),window.location.reload()}))}else T(!1)}},"submit results"),!I&&l.a.createElement("div",{className:"submit-race-results-error-message"},"Must have all places (1st through 4th) filled out"))},L=(a(72),a(73),function(e){var t=e.title,a=e.leaders;return l.a.createElement("div",{className:"leaderboardContainer"},l.a.createElement("h1",null,t),l.a.createElement("table",{className:"leaderboardTable"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"ID"),l.a.createElement("th",null,"NAME"),l.a.createElement("th",null,"POINTS"))),l.a.createElement("tbody",null,void 0!==a&&a.map((function(e,t){return l.a.createElement("tr",{key:"regular"+t},l.a.createElement("td",null,e.group_id),l.a.createElement("td",null,e.clubber),l.a.createElement("td",null,e.points))})))))});s.a.defaults.headers.common={Authorization:"Bearer ".concat(localStorage.getItem("authToken"))};var B=function(){var e=Object(n.useState)(),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(),u=Object(i.a)(r,2),o=u[0],m=u[1];return Object(n.useEffect)((function(){s.a.get("/points-leaderboard").then((function(e){c(e.data.outlaws),m(e.data.regular)})).catch((function(e){console.log(e)}))}),[]),l.a.createElement(O,null,l.a.createElement("div",{className:"leaderboardsContainer"},l.a.createElement(L,{title:"Regular",leaders:o}),l.a.createElement(L,{title:"Outlaw",leaders:a})))};s.a.defaults.baseURL="https://awana-grand-prix-api.herokuapp.com/",s.a.defaults.headers.common={Authorization:"Bearer ".concat(localStorage.getItem("authToken"))};var U=l.a.createElement(u.a,{basename:"/AwanaGrandPrixWeb"},l.a.createElement("div",null,l.a.createElement(o.b,{exact:!0,path:"/",component:d}),l.a.createElement(o.b,{exact:!0,path:"/check-in",component:R}),l.a.createElement(o.b,{exact:!0,path:"/cars",component:_}),l.a.createElement(o.b,{exact:!0,path:"/races",component:N}),l.a.createElement(o.b,{exact:!0,path:"/lineup",component:D}),l.a.createElement(o.b,{exact:!0,path:"/leaderboard",component:B})));r.a.render(U,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[74,1,2]]]);
//# sourceMappingURL=main.0d0d4309.chunk.js.map